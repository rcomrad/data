import{o as m,r as f,j as t}from"./index--C9Zf2yg.js";import{A as h}from"./config-ZEIqkGks.js";var g=Object.defineProperty,b=(l,e,a)=>e in l?g(l,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[e]=a,p=(l,e,a)=>(b(l,typeof e!="symbol"?e+"":e,a),a);function j({onChange:l,defaultValue:e,required:a}){const[n,r]=m.useState(e??"");return t.jsx("input",{className:"form-check-input",type:"checkbox",required:a,checked:n==="true",onChange:u=>{l(u.currentTarget.checked?"true":"false"),r(u.currentTarget.checked?"true":"false")}})}class N{createElement(e,a,n){return t.jsxs("div",{className:"mb-3 form-check",children:[t.jsx(j,{required:e.required,onChange:a,defaultValue:e.defaultValue,...e.properties}),t.jsx("label",{className:"form-check-label",children:e.label}),t.jsx("div",{className:"invalid-feedback",children:e.invalidText??n??"This field is required"})]})}getDefaultValue(e){return e.defaultValue??"false"}}function V({onChange:l,type:e,defaultValue:a,required:n,min:r,max:u,step:c}){const[s,i]=m.useState(a??"");return f.useEffect(()=>{i(a??"")},[a]),t.jsx("input",{type:e,required:n,className:"form-control",min:r,max:u,step:c,value:s,onChange:d=>{l(d.currentTarget.value),i(d.currentTarget.value)}})}class T{createElement(e,a,n){return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"form-label",children:e.label}),t.jsx(V,{onChange:a,required:e.required,defaultValue:e.defaultValue,...e.properties}),t.jsx("div",{className:"invalid-feedback",children:e.invalidText??n??"This field is required"})]})})}getDefaultValue(e){return e.defaultValue}}function q({onChange:l,defaultValue:e,options:a,name:n,required:r,invalidText:u}){const[c,s]=f.useState(e);return t.jsx(t.Fragment,{children:a.map((i,d)=>t.jsxs("div",{className:"mb-3 form-check",children:[t.jsx("input",{className:"form-check-input",type:"radio",name:n,required:r,checked:c===i,"aria-labelledby":"id_"+i,onChange:()=>{s(i),l(i)}}),t.jsx("label",{className:"form-check-label",id:"id_"+i,children:i}),d===a.length-1&&r?t.jsx("div",{className:"invalid-feedback",children:u}):null]},i))})}class y{createElement(e,a,n){return t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"form-label",children:e.label}),t.jsx(q,{onChange:a,required:e.required,invalidText:e.invalidText??n??"This field is required",defaultValue:e.defaultValue,name:e.name,...e.properties})]})}getDefaultValue(e){return e.defaultValue}}function k(l,e,a){return a||(e?[]:l[0].value)}function C({onChange:l,options:e,multiple:a,defaultValue:n,required:r}){const[u,c]=m.useState(k(e,a,n));return t.jsx("select",{className:"form-select",value:u,required:r,multiple:a,onChange:s=>{a?(c([...s.currentTarget.selectedOptions].map(i=>i.value)),l([...s.currentTarget.selectedOptions].map(i=>i.value))):(c(s.currentTarget.value),l(s.currentTarget.value))},children:e.map(s=>t.jsx("option",{value:s.value,children:s.label},s.value))})}class E{createElement(e,a,n){return t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"form-label",children:e.label}),t.jsx(C,{onChange:a,required:e.required,defaultValue:e.defaultValue,...e.properties}),t.jsx("div",{className:"invalid-feedback",children:e.invalidText??n??"Please fill this field"})]})}getDefaultValue(e){return e.defaultValue?e.defaultValue:e.properties.multiple?[]:e.properties.options[0].value}}function w({onChange:l,defaultValue:e,rows:a,cols:n,required:r}){const[u,c]=f.useState(e);return t.jsx("textarea",{className:"form-control",rows:a,cols:n,required:r,onChange:s=>{l(s.target.value),c(s.target.value)},value:u})}class S{createElement(e,a,n){return t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"form-label",children:e.label}),t.jsx(w,{required:e.required,defaultValue:e.defaultValue,onChange:a,...e.properties}),t.jsx("div",{className:"invalid-feedback",children:e.invalidText??n??"This field is required"})]})}getDefaultValue(e){return e.defaultValue}}const v=class o{constructor(){p(this,"_elements",new Map([["input",new T],["checkbox",new N],["radio",new y],["select",new E],["textarea",new S]]))}static getInstance(){return o._instance||(o._instance=new o),o._instance}addElement(e,a){this._elements.set(e,a)}getElementByName(e){return this._elements.get(e)}};p(v,"_instance");let x=v;function D(l,e,a,n){var r;return(r=x.getInstance().getElementByName(l.type))==null?void 0:r.createElement(l,u=>{a({...e,[l.name]:u})},n)}function O(l){let e={};return l.forEach(a=>{var n;let r=(n=x.getInstance().getElementByName(a.type))==null?void 0:n.getDefaultValue(a);r!==void 0&&(e[a.name]=r)}),e}function P({title:l,elements:e,onButtonClick:a,buttonText:n,defaultInvalidText:r}){const[u,c]=m.useState({}),[s,i]=m.useState("");return f.useEffect(()=>{c(O(e))},[e]),t.jsxs(t.Fragment,{children:[t.jsx("h1",{children:l}),t.jsxs("form",{noValidate:!0,className:s,onSubmit:d=>{d.preventDefault(),d.stopPropagation(),d.currentTarget.checkValidity()?a(u):i("was-validated")},children:[e.map(d=>t.jsx("div",{children:D(d,u,c,r)},d.label)),t.jsx("button",{type:"submit",className:"btn btn-primary",children:n??"Submit"})]})]})}async function B(l,e){const a=await fetch(`${h}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:l,password:e})});return a.ok?{isGood:!0,value:(await a.json()).user}:{isGood:!1,reason:"Invalid login or password",value:{}}}async function R(l,e,a,n){const r=await fetch(`${h}/registration`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:l,password:e,email:a,key:n})});return{isGood:r.ok,value:r.ok}}export{B as L,P as O,R};
