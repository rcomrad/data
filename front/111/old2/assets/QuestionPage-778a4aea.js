import{a as f}from"./runtime-dom.esm-bundler-b9ecab8c.js";import{u as g}from"./vue-router-42ccad0b.js";import{u as h}from"./vuex.esm-bundler-af09927f.js";import{a as l,U as r}from"./axios-940a6ca7.js";import{G as m,T as b,H as w,z as q,o as S,c as y,a as t,M as u,y as k,J as x}from"./runtime-core.esm-bundler-292d2fca.js";const M={class:"ps-5"},N={class:"my-3"},T=["innerHTML"],B={class:"my-3 border-top py-3"},L={action:"",onsubmit:"return false"},D={class:"form-label"},H={class:"row"},J={class:"col-4"},O={class:"col-4"},R={__name:"QuestionPage",setup(U){const i=g(),a=h(),e=m(""),c=()=>{let s=a.state.tasks.questions_list.find(n=>n.id===Number(i.params.id));s.legend===void 0?(console.log("load"),l.get(r+"/get_question/"+i.params.id+"/"+JSON.parse(localStorage.getItem("user")).id).then(n=>{e.value=n.data.question,e.value.answer&&(e.value.answer=e.value.answer.slice(0,e.value.answer.length-1),o.value=e.value.answer),a.commit("update_singe_question",{id:e.value.id,new_value:e.value})})):(e.value=s,o.value=e.value.answer)},o=m(),d=()=>{a.state.tasks.questions_list.length===0?l.get(r+"/get/if/competition_problem/competition_id="+i.params.c_id).then(s=>{a.state.tasks.questions_list.length===0&&a.commit("set_questions_list",s.data.competition_problems),c()}):c()};b(d),w(i,()=>{d()});const _=q(()=>{switch(e.value.type){case 0:return"Введите правильный ответ";case 1:return"Выберите правильный ответ";case 2:return"Выберите все правильные ответы";default:return"Загрузка...."}}),p=()=>{l({url:r+"/post/answer",method:"POST",data:{user_id:JSON.parse(localStorage.getItem("user")).id,question_id:Number(i.params.id),value:o.value}}).then(s=>{e.value.sent=!0,e.value.answer=o.value,a.commit("update_singe_question",{id:e.value.id,new_value:e.value})})};return window.addEventListener("beforeunload",function(s){s.preventDefault(),s.returnValue=""}),(s,n)=>(S(),y("div",M,[t("h3",N,u(e.value.name),1),t("div",{innerHTML:e.value.legend,class:"border-top pt-3"},null,8,T),t("div",B,[t("form",L,[t("label",D,u(k(_)),1),t("div",H,[t("div",J,[x(t("input",{class:"form-control",maxlength:"10","onUpdate:modelValue":n[0]||(n[0]=v=>o.value=v),required:""},null,512),[[f,o.value]])]),t("div",O,[t("button",{class:"btn btn-primary",type:"submit",onClick:p},u(e.value.verdict?"Изменить ответ":"Отправить"),1)])])])])]))}};export{R as default};
