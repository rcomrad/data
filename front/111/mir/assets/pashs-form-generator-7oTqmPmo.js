import{o as m,r as f,j as l}from"./index-PCbCuOPi.js";var v=Object.defineProperty,b=(t,e,a)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,h=(t,e,a)=>(b(t,typeof e!="symbol"?e+"":e,a),a);function g({onChange:t,defaultValue:e,required:a}){const[r,n]=m.useState(e??"");return l.jsx("input",{className:"form-check-input",type:"checkbox",required:a,checked:r==="true",onChange:i=>{t(i.currentTarget.checked?"true":"false"),n(i.currentTarget.checked?"true":"false")}})}class j{createElement(e,a,r){return l.jsxs("div",{className:"mb-3 form-check",children:[l.jsx(g,{required:e.required,onChange:a,defaultValue:e.defaultValue,...e.properties}),l.jsx("label",{className:"form-check-label",children:e.label}),l.jsx("div",{className:"invalid-feedback",children:e.invalidText??r??"This field is required"})]})}getDefaultValue(e){return e.defaultValue??"false"}}function V({onChange:t,type:e,defaultValue:a,required:r,min:n,max:i,step:c}){const[s,u]=m.useState(a??"");return f.useEffect(()=>{u(a??"")},[a]),l.jsx("input",{type:e,required:r,className:"form-control",min:n,max:i,step:c,value:s,onChange:d=>{t(d.currentTarget.value),u(d.currentTarget.value)}})}class N{createElement(e,a,r){return l.jsx(l.Fragment,{children:l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"form-label",children:e.label}),l.jsx(V,{onChange:a,required:e.required,defaultValue:e.defaultValue,...e.properties}),l.jsx("div",{className:"invalid-feedback",children:e.invalidText??r??"This field is required"})]})})}getDefaultValue(e){return e.defaultValue}}function q({onChange:t,defaultValue:e,options:a,name:r,required:n,invalidText:i}){const[c,s]=f.useState(e);return l.jsx(l.Fragment,{children:a.map((u,d)=>l.jsxs("div",{className:"mb-3 form-check",children:[l.jsx("input",{className:"form-check-input",type:"radio",name:r,required:n,checked:c===u,"aria-labelledby":"id_"+u,onChange:()=>{s(u),t(u)}}),l.jsx("label",{className:"form-check-label",id:"id_"+u,children:u}),d===a.length-1&&n?l.jsx("div",{className:"invalid-feedback",children:i}):null]},u))})}class T{createElement(e,a,r){return l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"form-label",children:e.label}),l.jsx(q,{onChange:a,required:e.required,invalidText:e.invalidText??r??"This field is required",defaultValue:e.defaultValue,name:e.name,...e.properties})]})}getDefaultValue(e){return e.defaultValue}}function k(t,e,a){return a||(e?[]:t[0].value)}function y({onChange:t,options:e,multiple:a,defaultValue:r,required:n}){const[i,c]=m.useState(k(e,a,r));return l.jsx("select",{className:"form-select",value:i,required:n,multiple:a,onChange:s=>{a?(c([...s.currentTarget.selectedOptions].map(u=>u.value)),t([...s.currentTarget.selectedOptions].map(u=>u.value))):(c(s.currentTarget.value),t(s.currentTarget.value))},children:e.map(s=>l.jsx("option",{value:s.value,children:s.label},s.value))})}class C{createElement(e,a,r){return l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"form-label",children:e.label}),l.jsx(y,{onChange:a,required:e.required,defaultValue:e.defaultValue,...e.properties}),l.jsx("div",{className:"invalid-feedback",children:e.invalidText??r??"Please fill this field"})]})}getDefaultValue(e){return e.defaultValue?e.defaultValue:e.properties.multiple?[]:e.properties.options[0].value}}function E({onChange:t,defaultValue:e,rows:a,cols:r,required:n}){const[i,c]=f.useState(e);return l.jsx("textarea",{className:"form-control",rows:a,cols:r,required:n,onChange:s=>{t(s.target.value),c(s.target.value)},value:i})}class w{createElement(e,a,r){return l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"form-label",children:e.label}),l.jsx(E,{required:e.required,defaultValue:e.defaultValue,onChange:a,...e.properties}),l.jsx("div",{className:"invalid-feedback",children:e.invalidText??r??"This field is required"})]})}getDefaultValue(e){return e.defaultValue}}const x=class o{constructor(){h(this,"_elements",new Map([["input",new N],["checkbox",new j],["radio",new T],["select",new C],["textarea",new w]]))}static getInstance(){return o._instance||(o._instance=new o),o._instance}addElement(e,a){this._elements.set(e,a)}getElementByName(e){return this._elements.get(e)}};h(x,"_instance");let p=x;function S(t,e,a,r){var n;return(n=p.getInstance().getElementByName(t.type))==null?void 0:n.createElement(t,i=>{a({...e,[t.name]:i})},r)}function D(t){let e={};return t.forEach(a=>{var r;let n=(r=p.getInstance().getElementByName(a.type))==null?void 0:r.getDefaultValue(a);n!==void 0&&(e[a.name]=n)}),e}function I({title:t,elements:e,onButtonClick:a,buttonText:r,defaultInvalidText:n}){const[i,c]=m.useState({}),[s,u]=m.useState("");return f.useEffect(()=>{c(D(e))},[e]),l.jsxs(l.Fragment,{children:[l.jsx("h1",{children:t}),l.jsxs("form",{noValidate:!0,className:s,onSubmit:d=>{d.preventDefault(),d.stopPropagation(),d.currentTarget.checkValidity()?a(i):u("was-validated")},children:[e.map(d=>l.jsx("div",{children:S(d,i,c,n)},d.label)),l.jsx("button",{type:"submit",className:"btn btn-primary",children:r??"Submit"})]})]})}export{I as O};
